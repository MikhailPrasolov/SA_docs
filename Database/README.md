# üóÑÔ∏è –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å—Ö–µ–º –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü—Ä–∏–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π](#-–ø—Ä–∏–º–µ—Ä—ã-–º–æ–¥–µ–ª–µ–π)
2. [–§–æ—Ä–º–∞—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#-—Ñ–æ—Ä–º–∞—Ç—ã-–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
3. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#-–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
4. [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
5. [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#-–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π

### 1. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é –¥–æ—Å—Ç—É–ø–∞

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:**
- **`users`** ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –∏–º—è, email, —Å—Ç–∞—Ç—É—Å, —Ö—ç—à –ø–∞—Ä–æ–ª—è
- **`roles`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–æ–ª–µ–π (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —Ä–µ–¥–∞–∫—Ç–æ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- **`permissions`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- **`user_roles`** ‚Äî —Å–≤—è–∑–∏ –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏
- **`role_permissions`** ‚Äî —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ä–æ–ª—è–º–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏

**–ê—É–¥–∏—Ç –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- **`user_login_history`** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
- **`password_reset_tokens`** ‚Äî —Ç–æ–∫–µ–Ω—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
- **`email_verification_tokens`** ‚Äî —Ç–æ–∫–µ–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email

### 2. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—å—é –º–∞–≥–∞–∑–∏–Ω–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–æ–∑–Ω–∏—á–Ω–æ–π —Å–µ—Ç–∏ —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–¥–∞–∂, —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Ü–µ–Ω

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:**
- **`stores`** ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –º–∞–≥–∞–∑–∏–Ω–∞—Ö —Å–µ—Ç–∏
- **`categories`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤
- **`suppliers`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- **`products`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –±–∞–∑–æ–≤—ã–º–∏ —Ü–µ–Ω–∞–º–∏
- **`cashiers`** ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –∫–∞—Å—Å–∏—Ä–∞—Ö
- **`sales`** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–¥–∞–∂
- **`sale_items`** ‚Äî –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
- **`store_prices`** ‚Äî —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º

---

## üìù –§–æ—Ä–º–∞—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### DBML (Database Markup Language)

```dbml
Table users {
  id uuid [pk]
  name varchar(255) [not null]
  email varchar(255) [unique, not null]
  password_hash varchar(255) [not null]
  status user_status [default: 'pending']
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Enum user_status {
  active
  inactive
  pending
  blocked
  deleted
}
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DBML:
- **–ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç** ‚Äî –ª–µ–≥–∫–æ –ø–æ–Ω–∏–º–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ER-–¥–∏–∞–≥—Ä–∞–º–º
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ SQL** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üèó –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **1NF** ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –≥—Ä—É–ø–ø
- **2NF** ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **3NF** ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- **–¢–∞–±–ª–∏—Ü—ã** ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ (`users`, `products`)
- **–ü–æ–ª—è** ‚Äî snake_case (`created_at`, `user_id`)
- **–ü–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏** ‚Äî `id` –∏–ª–∏ `{table_name}_id`
- **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏** ‚Äî `{referenced_table}_id`

### 3. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** ‚Äî `uuid` –∏–ª–∏ `bigint`
- **–î–∞—Ç—ã** ‚Äî `timestamp` –∏–ª–∏ `date`
- **–¢–µ–∫—Å—Ç** ‚Äî `varchar(n)` —Å —Ä–∞–∑—É–º–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è** ‚Äî `boolean`

---

## üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| [dbdiagram.io](https://dbdiagram.io) | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è DBML |
| [QuickDBD](https://quickdatabasediagrams.com/) | –ë—ã—Å—Ç—Ä–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| [JetBrains DataGrip](https://www.jetbrains.com/datagrip/) | –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î |
| [MySQL Workbench](https://www.mysql.com/products/workbench/) | –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ MySQL |
| [pgModeler](https://pgmodeler.io/) | –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ PostgreSQL |

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥–∞–∂ –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º
```sql
SELECT 
    st.store_name,
    COUNT(DISTINCT s.sale_id) as total_sales,
    SUM(s.total_amount) as total_revenue,
    AVG(s.total_amount) as avg_sale_amount
FROM sales s
JOIN stores st ON s.store_id = st.store_id
WHERE s.status = 'completed'
GROUP BY st.store_id, st.store_name
ORDER BY total_revenue DESC;
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—è–º–∏
```sql
SELECT 
    u.id,
    u.name,
    u.email,
    u.status,
    ARRAY_AGG(r.name) as roles
FROM users u
LEFT JOIN user_roles ur ON u.id = ur.user_id
LEFT JOIN roles r ON ur.role_id = r.id
WHERE u.status = 'active'
GROUP BY u.id, u.name, u.email, u.status;
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```sql
SELECT 
    u.name,
    u.email,
    COUNT(ulh.id) as login_count,
    MAX(ulh.login_time) as last_login
FROM users u
LEFT JOIN user_login_history ulh ON u.id = ulh.user_id
WHERE ulh.login_time >= CURRENT_DATE - INTERVAL '30 days'
GROUP BY u.id, u.name, u.email
ORDER BY login_count DESC;
```

---

## ü§ñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Context7

Context7 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:

```
–°–æ–∑–¥–∞–π –º–æ–¥–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. use context7
```

```
–ù–∞–ø–∏—à–∏ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–¥–∞–∂ –≤ PostgreSQL. use library /postgresql/postgresql
```

```
–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞. use context7
```

### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ ID –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:
- `/postgresql/postgresql` - PostgreSQL
- `/mongodb/mongodb` - MongoDB
- `/mysql/mysql` - MySQL
- `/sqlite/sqlite` - SQLite

---

## üìö –†–µ—Å—É—Ä—Å—ã

1. [DBML Documentation](https://dbml.dbdiagram.io/docs/)
2. [Database Normalization](https://en.wikipedia.org/wiki/Database_normalization)
3. [SQL Style Guide](https://www.sqlstyle.guide/)
4. [PostgreSQL Documentation](https://www.postgresql.org/docs/)

---

## üìÅ –§–∞–π–ª—ã –≤ —Ä–∞–∑–¥–µ–ª–µ

- [`–ü—Ä–∏–º–µ—Ä –ë–î.dbml`](./–ü—Ä–∏–º–µ—Ä%20–ë–î.dbml) ‚Äî –ø—Ä–∏–º–µ—Ä —Å—Ö–µ–º—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [`–ú–∞–≥–∞–∑–∏–Ω—ã_–ë–î.dbml`](./–ú–∞–≥–∞–∑–∏–Ω—ã_–ë–î.dbml) ‚Äî —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞–º–∏
- [`–ú–∞–≥–∞–∑–∏–Ω—ã_–ë–î_–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md`](./–ú–∞–≥–∞–∑–∏–Ω—ã_–ë–î_–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üì¨ –ö–æ–Ω—Ç–∞–∫—Ç—ã

- üîó **–ö–æ–Ω—Ç–∞–∫—Ç—ã –∞–≤—Ç–æ—Ä–∞**  
  ‚Ä¢ TG: [@MikhailPrasolov](https://t.me/MikhailPrasolov)  
  ‚Ä¢ –ö–∞–Ω–∞–ª: [t.me/systemananalytics](https://t.me/systemananalytics)

> –ï—Å–ª–∏ –∑–∞–º–µ—Ç–∏–ª–∏ –æ—à–∏–±–∫—É –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äî —Å–º–µ–ª–æ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ Issue –∏–ª–∏ –ø—Ä–∏—Å—ã–ª–∞–π—Ç–µ Pull Request!

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ù–æ—è–±—Ä—å 2024*
